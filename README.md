Book Management System API

This is a Ruby on Rails API for managing a library system where users can borrow and return books. The system tracks user balances, book availability, and generates reports.

Features

User Management:

Each user has an initial account number and balance.
Users can borrow and return books (deducting or adding fees to their balance).
Users cannot borrow books if their balance is insufficient.

Book Management:

Tracks the total and available copies of each book.
Calculates income generated by a book within a specified time range.

Reporting:

Query a userâ€™s account status (balance and borrowed books).
Generate monthly and annual reports for a user (number of books borrowed and total spending).

API Endpoints

Creating a User
URL: POST /users

Request Body:

Json
{
	"user": {
	  "email": "user@example.com",
	  "password": "password",
	  "account_number": "123456",
	  "balance": 100.0
	 	}
}

Response:

Json
{
  "data": {
    "id": "1",
    "type": "user",
    "attributes": {
      "email": "user@example.com",
      "account_number": "123456",
      "balance": 100.0
    }
  }
}

Borrow a Book
URL: POST /transactions/borrow

Request Body:

json
Copy
{
  "user_id": 1,
  "book_id": 1
}
Response:

json
Copy
{
  "data": {
    "id": "1",
    "type": "transaction",
    "attributes": {
      "transaction_type": "borrow",
      "amount": -5.0,
      "created_at": "2023-10-01T12:34:56Z"
    }
  }
}
3. Return a Book
URL: POST /transactions/return

Request Body:

json
Copy
{
  "user_id": 1,
  "book_id": 1
}
Response:

json
Copy
{
  "data": {
    "id": "1",
    "type": "transaction",
    "attributes": {
      "transaction_type": "return",
      "amount": 5.0,
      "created_at": "2023-10-01T12:34:56Z"
    }
  }
}
4. Query User Account Status
URL: GET /users/:id/account_status

Response:

json
Copy
{
  "data": {
    "balance": 90.0,
    "borrowed_books": [
      {
        "id": "1",
        "type": "transaction",
        "attributes": {
          "transaction_type": "borrow",
          "amount": -5.0,
          "created_at": "2023-10-01T12:34:56Z"
        }
      }
    ]
  }
}
5. Query Book Income
URL: GET /books/:id/income?start_time=2023-01-01&end_time=2023-12-31

Response:

json
Copy
{
  "data": {
    "book_id": 1,
    "total_income": 15.0
  }
}
Setup Instructions
1. Prerequisites
Ruby 3.x

Rails 7.x

PostgreSQL (or SQLite for development)

2. Clone the Repository
bash
Copy
git clone https://github.com/your-username/book-management-system.git
cd book-management-system
3. Install Dependencies
bash
Copy
bundle install
4. Set Up the Database
bash
Copy
rails db:create
rails db:migrate
5. Seed Sample Data
bash
Copy
rails db:seed
6. Start the Server
bash
Copy
rails server
Visit http://localhost:3000 to access the API.

Design Ideas
Models
User:

Tracks user details (email, account number, balance).

Has many transactions.

Book:

Tracks book details (title, total copies, available copies).

Has many transactions.

Transaction:

Records borrow/return actions.

Belongs to a user and a book.

Serialization
Uses jsonapi-serializer for fast, standardized JSON responses.

Testing
Uses RSpec and factory_bot for unit and request tests.

Test coverage includes:

User creation and account status.

Book borrowing and returning.

Income calculation for books.

Deployment
Heroku
Install the Heroku CLI.

Create a Heroku app:

bash
Copy
heroku create
Deploy the app:

bash
Copy
git push heroku main
Run migrations:

bash
Copy
heroku run rails db:migrate
Contributing
Fork the repository.

Create a new branch:

bash
Copy
git checkout -b feature/your-feature
Commit your changes:

bash
Copy
git commit -m "Add your feature"
Push to the branch:

bash
Copy
git push origin feature/your-feature
Open a pull request.

License
This project is licensed under the MIT License. See the LICENSE file for details.

Contact
For questions or feedback, please contact:

Your Name

Email: your.email@example.com

GitHub: your-username

Enjoy using the Book Management System API! ðŸ“šðŸš€

Let me know if you need further adjustments! ðŸ˜Š
